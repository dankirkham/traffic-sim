!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i,r;i=[n,e,n(1),n(40),n(52),n(53)],r=function(t,e,n,i,r,o){"use strict";function s(){p.draw(f)}function a(){f.getCamera().tick(10)}function u(){g.tick()}function c(){y.tick(g.getTime(),f)}function l(){d.tick()}e.__esModule=!0;var h=document.getElementById("mainCanvas");h.width=window.innerWidth-20,h.height=window.innerHeight-20;var f=n.default.generate(h),p=new i.default(h,f);setInterval(s,15),setInterval(a,10);var g=new r.default;setInterval(u,417),f.setClock(g);var y=f.getScheduler();setInterval(c,417);var d=new o.default(f);setInterval(l,30)}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e,n(3),n(6),n(4),n(7),n(2),n(8),n(18),n(32),n(39)],r=function(t,e,n,i,r,o,s,a,u,c,l){"use strict";e.__esModule=!0;var h=function(){function t(){}return t.initializeInput=function(t,e){var n=new o.default(e);n.bind(t);var i=new r.default;i.bind(t),e.setKeyHandler(i)},t.initializeScheduler=function(t){var e=new a.default;t.setScheduler(e),e.init(t.getPersons())},t.initializeCamera=function(t){var e=new i.default,r=new n.default(e);r.getLocation().setX(t.getMap().getWidth()/2),r.getLocation().setY(t.getMap().getHeight()/2),t.setCamera(r)},t.generate=function(e){var n=new s.default,i=new l.default;return n.setMap(c.default.generate(i)),u.default.generate(n),t.initializeScheduler(n),t.initializeCamera(n),t.initializeInput(e,n.getCamera()),n},t}();e.default=h}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(){this.persons=[],this.cars=[]}return t.prototype.getMap=function(){return this.map},t.prototype.setMap=function(t){this.map=t},t.prototype.getCamera=function(){return this.camera},t.prototype.setCamera=function(t){this.camera=t},t.prototype.getScheduler=function(){return this.scheduler},t.prototype.setScheduler=function(t){this.scheduler=t},t.prototype.getPersons=function(){return this.persons},t.prototype.addPerson=function(t){this.persons.push(t)},t.prototype.getCars=function(){return this.cars},t.prototype.getClock=function(){return this.clock},t.prototype.setClock=function(t){this.clock=t},t}();e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e,n(4),n(5)],r=function(t,e,n,i){"use strict";e.__esModule=!0;var r=function(){function t(t){this.azimuth=0,this.elevation=85,this.range=850,this.location=new i.default(0,0),this.velocity=new i.default(0,0),this.config=t}return t.prototype.getAzimuth=function(){return this.azimuth},t.prototype.setAzimuth=function(t){this.azimuth=(t+360)%360},t.prototype.getElevation=function(){return this.elevation},t.prototype.setElevation=function(t){t>this.config.getMaxElevation()?this.elevation=this.config.getMaxElevation():t<this.config.getMinElevation()?this.elevation=this.config.getMinElevation():this.elevation=t},t.prototype.getRange=function(){return this.range},t.prototype.setRange=function(t){t>this.config.getMaxRange()?this.range=this.config.getMaxRange():t<this.config.getMinRange()?this.range=this.config.getMinRange():this.range=t},t.prototype.getLocation=function(){return this.location},t.prototype.toString=function(){return"("+this.getAzimuth()+", "+this.getElevation()+", "+this.getRange()+")"},t.prototype.getConfig=function(){return this.config},t.prototype.setKeyHandler=function(t){this.keyHandler=t},t.prototype.getAccelerationVector=function(){var t=new i.default(0,0);return this.keyHandler?(this.keyHandler.isPressingDirection(n.default.DIRECTION_UP)&&(t=t.add(new i.default(0,-1))),this.keyHandler.isPressingDirection(n.default.DIRECTION_LEFT)&&(t=t.add(new i.default(-1,0))),this.keyHandler.isPressingDirection(n.default.DIRECTION_DOWN)&&(t=t.add(new i.default(0,1))),this.keyHandler.isPressingDirection(n.default.DIRECTION_RIGHT)&&(t=t.add(new i.default(1,0))),t.rotate(this.azimuth).unit().scalarMultiply(this.config.getAcceleration())):t},t.prototype.tick=function(t){var e,n;e=.001*this.config.getFriction()*t>this.velocity.magnitude()?this.velocity.scalarMultiply(-1):this.velocity.unit().scalarMultiply(.001*-this.config.getFriction()*t),n=this.keyHandler&&this.keyHandler.isMoving()?this.getAccelerationVector().scalarMultiply(.001*t).add(e):e,this.velocity=this.velocity.add(n);var i=this.velocity.magnitude();i>this.config.getMaxVelocity()&&(this.velocity=this.velocity.scalarMultiply(this.config.getMaxVelocity()/i)),this.location=this.location.add(this.velocity.scalarMultiply(.001*t))},t}();e.default=r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(){var e=this;this.handleKeyDown=function(n){n.key&&("ArrowUp"==n.key?e.keys[t.KEY_UP]=!0:"ArrowLeft"==n.key?e.keys[t.KEY_LEFT]=!0:"ArrowDown"==n.key?e.keys[t.KEY_DOWN]=!0:"ArrowRight"==n.key?e.keys[t.KEY_RIGHT]=!0:"w"==n.key?e.keys[t.KEY_W]=!0:"a"==n.key?e.keys[t.KEY_A]=!0:"s"==n.key?e.keys[t.KEY_S]=!0:"d"==n.key&&(e.keys[t.KEY_D]=!0))},this.handleKeyUp=function(n){n.key&&("ArrowUp"==n.key?e.keys[t.KEY_UP]=!1:"ArrowLeft"==n.key?e.keys[t.KEY_LEFT]=!1:"ArrowDown"==n.key?e.keys[t.KEY_DOWN]=!1:"ArrowRight"==n.key?e.keys[t.KEY_RIGHT]=!1:"w"==n.key?e.keys[t.KEY_W]=!1:"a"==n.key?e.keys[t.KEY_A]=!1:"s"==n.key?e.keys[t.KEY_S]=!1:"d"==n.key&&(e.keys[t.KEY_D]=!1))},this.keys=[]}return t.prototype.isMoving=function(){return this.keys[t.KEY_UP]||this.keys[t.KEY_W]||this.keys[t.KEY_LEFT]||this.keys[t.KEY_A]||this.keys[t.KEY_DOWN]||this.keys[t.KEY_S]||this.keys[t.KEY_RIGHT]||this.keys[t.KEY_D]},t.prototype.isPressingDirection=function(e){switch(e){case t.DIRECTION_UP:return this.keys[t.KEY_UP]||this.keys[t.KEY_W];case t.DIRECTION_LEFT:return this.keys[t.KEY_LEFT]||this.keys[t.KEY_A];case t.DIRECTION_DOWN:return this.keys[t.KEY_DOWN]||this.keys[t.KEY_S];case t.DIRECTION_RIGHT:return this.keys[t.KEY_RIGHT]||this.keys[t.KEY_D];default:return!1}},t.prototype.bind=function(t){document.addEventListener("keydown",this.handleKeyDown,!1),document.addEventListener("keyup",this.handleKeyUp,!1)},t}();n.KEY_UP=0,n.KEY_LEFT=1,n.KEY_DOWN=2,n.KEY_RIGHT=3,n.KEY_W=4,n.KEY_A=5,n.KEY_S=6,n.KEY_D=7,n.DIRECTION_UP=0,n.DIRECTION_LEFT=1,n.DIRECTION_DOWN=2,n.DIRECTION_RIGHT=3,e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.getDistance=function(t){return Math.sqrt(Math.pow(this.getX()-t.getX(),2)+Math.pow(this.getY()-t.getY(),2))},t.prototype.getString=function(){return"("+this.x+", "+this.y+")"},t.prototype.setX=function(t){this.x=t},t.prototype.setY=function(t){this.y=t},t.prototype.add=function(e){return new t(this.getX()+e.getX(),this.getY()+e.getY())},t.prototype.subtract=function(e){return new t(this.getX()-e.getX(),this.getY()-e.getY())},t.prototype.dotProduct=function(t){return this.getX()*t.getX()+this.getY()*t.getY()},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.getX(),2)+Math.pow(this.getY(),2))},t.prototype.scalarMultiply=function(e){return new t(this.getX()*e,this.getY()*e)},t.prototype.unit=function(){return 0==this.magnitude()?this:new t(this.getX()/this.magnitude(),this.getY()/this.magnitude())},t.prototype.rotate=function(e){var n=-Math.sin(e*Math.PI/180),i=Math.cos(e*Math.PI/180);return new t(this.getX()*i+this.getY()*n,this.getX()*n-this.getY()*i)},t.prototype.toString=function(){return"("+this.getX()+", "+this.getY()+")"},t}();e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(){this.minElevation=15,this.maxElevation=89.9,this.minRange=50,this.maxRange=1e3,this.horizontalSensitivity=.4,this.verticalSensitivity=.4,this.zoomSensitivity=.083333333,this.minX=0,this.maxX=1520,this.minY=0,this.maxY=855,this.acceleration=1e4,this.friction=5e3,this.maxVelocity=2e3}return t.prototype.getMinElevation=function(){return this.minElevation},t.prototype.getMaxElevation=function(){return this.maxElevation},t.prototype.getMinRange=function(){return this.minRange},t.prototype.getMaxRange=function(){return this.maxRange},t.prototype.getHorizontalSensitivity=function(){return this.horizontalSensitivity},t.prototype.getVerticalSensitivity=function(){return this.verticalSensitivity},t.prototype.getZoomSensitivity=function(){return this.zoomSensitivity},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getAcceleration=function(){return this.acceleration},t.prototype.getFriction=function(){return this.friction},t.prototype.getMaxVelocity=function(){return this.maxVelocity},t}();e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(t){var e=this;this.handleMouseDown=function(t){e.mouseDown=!0,e.lastMouseX=t.clientX,e.lastMouseY=t.clientY},this.handleMouseUp=function(t){e.mouseDown=!1},this.handleMouseMove=function(t){if(!e.mouseDown)return!1;var n=t.clientX,i=t.clientY;e.camera.setAzimuth(e.camera.getAzimuth()+e.camera.getConfig().getHorizontalSensitivity()*(n-e.lastMouseX)),e.camera.setElevation(e.camera.getElevation()+e.camera.getConfig().getVerticalSensitivity()*(i-e.lastMouseY)),e.lastMouseX=n,e.lastMouseY=i},this.handleMouseWheel=function(t){var n=-t.wheelDelta;e.camera.setRange(e.camera.getRange()+e.camera.getConfig().getZoomSensitivity()*n)},this.camera=t,this.mouseDown=!1,this.lastMouseX=null,this.lastMouseY=null}return t.prototype.bind=function(t){t.onmousedown=this.handleMouseDown,document.onmouseup=this.handleMouseUp,document.onmousemove=this.handleMouseMove,t.addEventListener("mousewheel",this.handleMouseWheel,!1),t.addEventListener("DOMMouseScroll",this.handleMouseWheel,!1)},t}();e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e,n(9),n(10),n(11),n(13),n(14),n(15),n(16)],r=function(t,e,n,i,r,o,s,a,u){"use strict";e.__esModule=!0;var c=function(){function t(){this.events=[],this.earlyBird=new r.default,this.punctual=new o.default,this.lateRiser=new s.default,this.lastTime=0}return t.prototype.init=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];this.schedule(r,i.default.HomeToWork,!1)}},t.prototype.schedule=function(t,e,i){var s;s=t.getChronotype()==r.default?this.earlyBird.getLeaveTime(e):t.getChronotype()==o.default?this.punctual.getLeaveTime(e):this.lateRiser.getLeaveTime(e);var u=new n.default(t,s,e,i);a.default.insert(u,this.events,n.default.compare)},t.prototype.tick=function(t,e){if(t<this.lastTime)for(var n=0,r=this.events;n<r.length;n++){var o=r[n];o.setNextDay(!1)}for(var s=this.events.length-1;s>=0;s--){var a=this.events[s];if(!a.getNextDay()&&a.getMinute()>this.lastTime&&a.getMinute()<=t){var c=a.getPerson(),l=c.getPathingAlgorithm().generatePath(c,e.getMap(),a.getType()),h=void 0,f=void 0;a.getType()==i.default.HomeToWork?(h=c.getWork(),f=c.getHome().getWay()):(h=c.getHome(),f=c.getWork().getWay());var p=new u.default(c,l,h,f);e.getCars().push(p),a.getType()==i.default.HomeToWork?this.schedule(c,i.default.WorkToHome,!1):this.schedule(c,i.default.HomeToWork,!0),this.events.splice(s,1)}}this.lastTime=t},t.prototype.getEvents=function(){return this.events},t}();e.default=c}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(t,e,n,i){this.person=t,this.minute=e,this.type=n,this.nextDay=i}return t.prototype.getPerson=function(){return this.person},t.prototype.getMinute=function(){return this.minute},t.prototype.getType=function(){return this.type},t.prototype.getNextDay=function(){return this.nextDay},t.prototype.setNextDay=function(t){this.nextDay=t},t}();n.compare=function(t,e){return t.getMinute()<e.getMinute()?-1:t.getMinute()>e.getMinute()?1:0},n.valueOf=function(t){return t.getMinute()},e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n;!function(t){t[t.HomeToWork=0]="HomeToWork",t[t.WorkToHome=1]="WorkToHome"}(n||(n={})),e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(12),n(10)],r=function(t,e,n,i){"use strict";e.__esModule=!0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getLeaveTime=function(t){return t==i.default.HomeToWork?n.default.STARTING_TIME+Math.floor(11*Math.random()-5)-60:n.default.QUITING_TIME+Math.floor(11*Math.random()-5)-60},e.prototype.getName=function(){return"Early Bird"},e}(n.default);e.default=r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(){}return t}();n.STARTING_TIME=480,n.QUITING_TIME=1020,e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(12),n(10)],r=function(t,e,n,i){"use strict";e.__esModule=!0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getLeaveTime=function(t){return t==i.default.HomeToWork?n.default.STARTING_TIME+Math.floor(11*Math.random()-5):n.default.QUITING_TIME+Math.floor(11*Math.random()-5)},e.prototype.getName=function(){return"Punctual"},e}(n.default);e.default=r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(12),n(10)],r=function(t,e,n,i){"use strict";e.__esModule=!0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getLeaveTime=function(t){return t==i.default.HomeToWork?n.default.STARTING_TIME+Math.floor(11*Math.random()-5)+60:n.default.QUITING_TIME+Math.floor(11*Math.random()-5)+60},e.prototype.getName=function(){return"Late Riser"},e}(n.default);e.default=r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(){}return t.insert=function(e,n,i){return n.splice(t.locationOf(e,n,i,0,n.length)+1,0,e),n},t.locationOf=function(e,n,i,r,o){if(0===n.length)return-1;r=r||0,o=o||n.length;var s=r+o>>1,a=i(e,n[s]);if(o-r<=1)return a==-1?s-1:s;switch(a){case-1:return t.locationOf(e,n,i,r,s);case 0:return s;case 1:return t.locationOf(e,n,i,s,o)}},t.getExtremeIndex=function(e,n,i,r,o,s){var a=e+n>>1;if(o(i[a])==r)for(;;)if(s){if(a+1>i.length||o(i[a+1])>r)return a;a+=1}else{if(a-1<0||o(i[a-1])<r)return a;a-=1}return e==n?e:n-e==1?s?o(i[n])>r?e:n:o(i[e])<r?n:e:o(i[a])<r?t.getExtremeIndex(a+1,n,i,r,o,s):t.getExtremeIndex(e,a-1,i,r,o,s)},t.getElementsBetween=function(e,n,i,r){if(0===i.length)return null;var o=t.getExtremeIndex(0,i.length-1,i,e,r,!1);t.getExtremeIndex(o+1,i.length-1,i,n,r,!0)},t}();e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e,n(17)],r=function(t,e,n){"use strict";e.__esModule=!0;var i=function(){function t(t,e,i,r){this.speed=0,this.person=t,this.path=e,this.destination=i,this.changeWay(r),this.wayPosition=this.destination.getDistance(),this.wayDirectionPositive=this.way.getDirectionToIntersection(this.path.length>=1?this.path[0]:null),this.pathIndex=0,this.state=n.CarState.Traveling,this.way===this.destination.getWay()&&console.log("A car has started on the same way as it's destination.")}return t.prototype.changeWay=function(t){this.way&&this.way.removeCar(this),this.way=t,this.way.addCar(this)},t.prototype.getCarInFront=function(){for(var t=this.way.getCars(),e=null,n=0,i=t;n<i.length;n++){var r=i[n];r!=this&&r.getWayDirectionPositive()==this.getWayDirectionPositive()&&(this.getWayDirectionPositive()?r.getWayPosition()>this.getWayPosition()&&(!e||e.getWayPosition()>r.getWayPosition())&&(e=r):r.getWayPosition()<this.getWayPosition()&&(!e||e.getWayPosition()<r.getWayPosition())&&(e=r))}return e},t.prototype.checkArrivedAtDestination=function(){return this.destination.getWay()===this.way&&(this.wayDirectionPositive?this.wayPosition>=this.destination.getDistance()-t.TARGET_DISTANCE:this.wayPosition<=this.destination.getDistance()+t.TARGET_DISTANCE)},t.prototype.checkArrivedAtIntersection=function(){return this.wayDirectionPositive?this.wayPosition>=1-t.TARGET_DISTANCE:this.wayPosition<=t.TARGET_DISTANCE},t.prototype.advanceCar=function(){var e,n,i=this.getCarInFront();i?(e=i.getSpeed(),n=Math.abs(i.getWayPosition()-this.getWayPosition())*this.way.getLength()-t.MIN_FOLLOW_DISTANCE):(e=t.MAX_SPEED,n=this.getWayDirectionPositive()?(1-this.getWayPosition())*this.way.getLength():this.getWayPosition()*this.way.getLength()),n<t.MIN_FOLLOW_DISTANCE&&(0!=n?e*=n/t.MIN_FOLLOW_DISTANCE:e=0);var r=(e-this.getSpeed())/10;r>t.MAX_ACCELERATION?r=t.MAX_ACCELERATION:r<-t.MAX_ACCELERATION&&(console.log("acceleration upper bound"),r=-t.MAX_ACCELERATION),this.speed+=r,this.speed>t.MAX_SPEED&&(this.speed=t.MAX_SPEED),0==this.speed&&console.log("Car with speed 0; frontDistance = "+n+"; targetSpeed = "+e+"; acceleration = "+r);var o=this.getSpeed()/this.way.getLength();this.wayDirectionPositive?this.wayPosition+=o:this.wayPosition-=o,this.wayPosition>1?this.wayPosition=1:this.wayPosition<0&&(this.wayPosition=0)},t.prototype.moveToNextWay=function(){this.pathIndex+1>=this.path.length?this.destination.getWay().isConnectedToIntersection(this.path[this.pathIndex])?(this.changeWay(this.destination.getWay()),this.wayDirectionPositive=!this.way.getDirectionToIntersection(this.path[this.pathIndex]),this.wayPosition=this.wayDirectionPositive?0:1):console.error("A car has a bad path and cannot reach it's destination."):(this.changeWay(this.path[this.pathIndex].getWayBetween(this.path[this.pathIndex+1])),this.wayDirectionPositive=this.way.getDirectionToIntersection(this.path[this.pathIndex+1]),this.wayPosition=this.wayDirectionPositive?0:1,this.pathIndex+=1)},t.prototype.advanceThroughIntersection=function(){this.state=n.CarState.Traveling,this.moveToNextWay()},t.prototype.move=function(){if(this.state==n.CarState.Arrived)return!0;if(this.checkArrivedAtDestination())return this.way.removeCar(this),void(this.state=n.CarState.Arrived);if(this.checkArrivedAtIntersection()){if(this.state!=n.CarState.Queued){var t=this.way.getIntersection(this.getWayDirectionPositive()?1:0);t.addCarToQueue(this),this.state=n.CarState.Queued}}else this.advanceCar()},t.prototype.getState=function(){return this.state},t.prototype.getWay=function(){return this.way},t.prototype.getWayPosition=function(){return this.wayPosition},t.prototype.getWayDirectionPositive=function(){return this.wayDirectionPositive},t.prototype.getPerson=function(){return this.person},t.prototype.getSpeed=function(){return this.speed},t}();i.TARGET_DISTANCE=.01,i.MIN_FOLLOW_DISTANCE=5,i.MAX_ACCELERATION=10,i.MAX_SPEED=1,e.default=i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n;!function(t){t[t.Traveling=0]="Traveling",t[t.Arrived=1]="Arrived",t[t.Queued=2]="Queued"}(n=e.CarState||(e.CarState={}))}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e,n(20),n(11),n(14),n(13),n(24),n(19),n(25),n(26),n(27),n(29),n(30),n(31)],r=function(t,e,n,i,r,o,s,a,u,c,l,h,f,p){"use strict";e.__esModule=!0;var g=function(){function t(){}return t.generateChronotype=function(){var t=Math.floor(3*Math.random());switch(t){case 0:return i.default;case 1:return r.default;default:return o.default}},t.generateDrivingProfile=function(){var t=Math.floor(4*Math.random());switch(t){case 0:return l.default;case 1:return h.default;case 2:return f.default;default:return p.default}},t.generatePathingAlgorithm=function(){return new u.default},t.generateCarColor=function(){var t=Math.floor(9*Math.random());switch(t){case 0:return c.CarColor.Purple;case 1:return c.CarColor.Yellow;case 2:return c.CarColor.White;case 3:return c.CarColor.Black;case 4:return c.CarColor.Orange;case 5:return c.CarColor.Brown;case 6:return c.CarColor.Green;case 7:return c.CarColor.Blue;default:return c.CarColor.Red}},t.generatePerson=function(e,i,r){var o=new a.default(n.default.generate());o.setHome(e),o.setWork(i),o.setChronotype(t.generateChronotype()),o.setDrivingProfile(t.generateDrivingProfile()),o.setPathingAlgorithm(t.generatePathingAlgorithm()),o.setCarColor(t.generateCarColor()),o.link(),r.addPerson(o)},t.generate=function(e){for(var n=[],i=[],r=0,o=e.getMap().getBuildings();r<o.length;r++){var a=o[r];a.getType()==s.BuildingType.Residential?n.push(a):i.push(a)}for(var u=0,c=0;u<n.length&&c<i.length;){var l=n[u],h=i[c];t.generatePerson(l,h,e),l.getCapacity()<=l.getPersons().length&&(u+=1),h.getCapacity()<=h.getPersons().length&&(c+=1)}},t}();e.default=g}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(t){this.name=t}return t.prototype.getName=function(){return this.name},t.prototype.getHome=function(){return this.home},t.prototype.setHome=function(t){this.home=t},t.prototype.getWork=function(){return this.work},t.prototype.setWork=function(t){this.work=t},t.prototype.getChronotype=function(){return this.chronotype},t.prototype.setChronotype=function(t){this.chronotype=t},t.prototype.getDrivingProfile=function(){return this.drivingProfile},t.prototype.setDrivingProfile=function(t){this.drivingProfile=t},t.prototype.getPathingAlgorithm=function(){return this.pathingAlgorithm},t.prototype.setPathingAlgorithm=function(t){this.pathingAlgorithm=t},t.prototype.getCarColor=function(){return this.carColor},t.prototype.setCarColor=function(t){this.carColor=t},t.prototype.link=function(){this.home&&this.home.addPerson(this),this.work&&this.work.addPerson(this)},t}();e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e,n(21),n(23)],r=function(t,e,n,i){"use strict";e.__esModule=!0;var r=function(){function t(){}return t.properName=function(t){return t.proper[Math.floor(Math.random()*t.proper.length)]},t.prefixSuffixName=function(t){for(var e;;){var n=t.prefix[Math.floor(Math.random()*t.prefix.length)],i=t.suffix[Math.floor(Math.random()*t.suffix.length)];e=n+i;for(var r=0,o=t.forbidden;r<o.length;r++){o[r]}break}return e},t.generate=function(){var e;return e=0==Math.floor(2*Math.random())?n.default:i.default,0==Math.floor(20*Math.random())?t.properName(e)+" "+t.prefixSuffixName(e):t.prefixSuffixName(e)+" "+t.prefixSuffixName(e)},t}();e.default=r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(22)],r=function(t,e,n){"use strict";e.__esModule=!0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(n.default);i.proper=["Alice","Barbara","Bonnie","Brooke","Carol","Ceri","Dotty","Dottie","Eileen","Ellen","Gia","Heidi","Jane","Jeaneane","Jean","Jeanette","Joan","Judith","Karen","Kazu","Keema","Leah","Leia","Lisa","Lola","Liz","Maya","Meg","Mila","Mae","Maegan","Margaret","Mito","Nancy","Nina","Marsha","Megan","Nicole","Olivia","Peggy","Piper","Phoebe","Sally","Samantha","Sara","Sarah","Serena","Shannon","Summer","Svetlana","Stephanie","Tamara","Tati","Tatiana"],i.prefix=["Aga","Al","An","Ar","As","Bea","Bar","Ber","Car","Cat","Cer","Clau","Cris","Da","Daph","De","Deb","Di","Dan","Eil","Eli","Eri","Fran","Gra","Ger","Gem","Gi","Gil","Gle","Gwen","Hai","Hay","Hel","Hil","Isa","Ir","Ja","Jan","Jen","Jes","Jo","Jul","Ka","Kar","Kat","Kath","Ker","Kim","La","Lager","Le","Lea","Lee","Lin","Lis","Liz","Lu","Ma","Mad","Mag","Mar","Mau","Max","Meg","Mel","Mi","Mil","Mir","Mo","Na","Nata","Ne","Pa","Pho","Ra","Ro","Ros","Sam","San","Si","Sie","Sig","Sta","Stel","Su","Tam","Tan","Te","Ti","Tra","Tri","Ur","Val","Ver","Vir","Wen","Wil","Zel"],i.suffix=["alla","anda","anna","anne","ayne","be","bel","belle","bella","bie","beth","berta","by","ca","cee","chel","chell","chelle","cia","cie","cine","cella","cy","da","dra","di","dia","die","dine","drien","dolin","edith","elyn","ella","elle","emma","ena","ene","enna","et","ette","gela","gee","gie","grid","gy","i","ice","icca","ie","iel","iella","igh","ina","isa","issa","ise","jorie","ke","la","lee","lenna","liana","lie","lin","lina","line","linne","lian","llian","lotte","ly","lyn","ma","mie","my","na","ne","nica","nie","nne","ny","phe","phie","phia","ra","re","ree","rie","righ","rina","rine","ris","ry","rys","sa","san","sei","selle","sie","sy","ta","te","tha","this","thy","ti","tina","tine","trice","trid","tris","trix","trude","ty","uki","ula","una","vie","vy","xie","xy","y","ya","yin","zie","zy"],e.default=i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(){}return t}();n.forbidden=["Dildo","Kerbal","Kerman","eee","rrr","Orgee","Dada","Megma","Anus","Sambo","aaa","aae","aai","aay","aie","aea","eae","eai","eei","eea","eei","eey","aee","eaa","iee","iie","aay","eay","aey","aan","uae","uie","uea","uan","uay","lll","nnn","mmm"],e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(22)],r=function(t,e,n){"use strict";e.__esModule=!0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(n.default);i.proper=["Adam","Al","Alan","Allison","Archibald","Benjamin","Brian","Buzz","Carson","Chad","Charlie","Chris","Chrisnic","Cristiano","Chuck","Dean","Ed","Edan","Edlu","Elliot","Elon","Fabien","Felipe","Felix","Frank","Franklin","Gus","Hans","Hermes","Jack","James","Jan","Jaysef","Jim","Johan","Kasper","Kevin","Kirk","Kurt","Lars","Lashel","Lefty","Lem","Luke","Mac","Malcolm","Maldom","Matt","Mike","Mind","Minidou","Pepe","Peter","Phil","Pomeroy","Randall","Ruben","Scott","Sean","Sido","Spaghetti","Steve","Tim","Tom","Ted","Vasya","Will","Ziggy"],i.prefix=["Ad","Al","Ald","An","Bar","Bart","Bil","Billy-Bob","Bob","Bur","Cal","Cam","Chad","Cor","Dan","Der","Des","Dil","Do","Don","Dood","Du","Dud","Dun","Ed","El","En","Er","Fer","Fred","Fro","Gene","Geof","Ger","Gil","Greg","Gus","Had","Hal","Han","Har","Hen","Her","Hud","Jed","Jen","Jer","Joe","John","Jeb","Jed","Jon","Jor","Kel","Ken","Ker","Kir","Lan","Lem","Len","Lo","Lod","Lu","Lud","Mac","Mal","Mat","Mel","Mer","Mil","Mit","Mun","Ned","Neil","Nel","New","Ob","Or","Pat","Phil","Pod","Ray","Rib","Rich","Ro","Rod","Ron","Sam","Sean","See","Shel","Shep","Sher","Sid","Sig","Son","Tan","Ted","Theo","Thom","Thomp","Tom","Wehr","Wil"],i.suffix=["ald","bal","bald","bart","bas","berry","bert","bin","ble","bles","bo","bree","brett","bro","bur","burry","bus","by","cal","can","cas","cott","dan","dard","das","den","din","do","dock","don","dorf","dos","dous","dred","drin","dun","ely","emone","emy","eny","fal","fel","fen","field","ford","fred","frey","frid","frod","fry","furt","gan","gar","gard","gas","gee","gel","ger","gun","hat","ing","ke","kin","lan","las","ler","ley","lie","lin","lo","lock","long","lorf","ly","mal","man","min","ming","mon","more","mund","my","nand","nard","ner","ney","nie","ny","oly","ory","pond","pont","rey","rick","rie","righ","rim","rod","ry","sby","sel","sen","sey","ski","son","sted","ster","sy","ton","top","trey","uki","ul","us","van","vey","vin","vis","well","wig","win","wise","zer","zon","zor"],e.default=i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n;!function(t){t[t.Residential=0]="Residential",t[t.Industrial=1]="Industrial"}(n=e.BuildingType||(e.BuildingType={}))}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e,n(10)],r=function(t,e,n){"use strict";e.__esModule=!0;var i=function(){function t(){}return t.prototype.findNextWay=function(t,e,n){for(var i=t[t.length-1],r=0,o=i.getWays();r<o.length;r++){var s=o[r];if(s.getBuildings().indexOf(e)>-1)return t}for(var a=[],u=0,c=i.getWays();u<c.length;u++){var s=c[u],l=s.getOtherIntersection(i);t.indexOf(l)===-1&&a.push(l)}var h=e.getWay().getLocationOfAddress(e.getDistance());a.sort(function(t,e){return t.getLocation().getDistance(h)-e.getLocation().getDistance(h)});for(var f=0,p=a;f<p.length;f++){var g=p[f],y=t.slice();y.push(g);var d=this.findNextWay(y,e,n+1);if(d)return d}return null},t.prototype.generatePath=function(t,e,i){var r,o;i===n.default.HomeToWork?(r=t.getHome(),o=t.getWork()):i===n.default.WorkToHome&&(r=t.getWork(),o=t.getHome());var s;return s=r.getDistance()>=.5?r.getWay().getIntersection(0):r.getWay().getIntersection(1),this.findNextWay([s],o,1)},t}();e.default=i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n;!function(t){t[t.Purple=0]="Purple",t[t.Yellow=1]="Yellow",t[t.White=2]="White",t[t.Black=3]="Black",t[t.Orange=4]="Orange",t[t.Brown=5]="Brown",t[t.Green=6]="Green",t[t.Blue=7]="Blue",t[t.Red=8]="Red"}(n=e.CarColor||(e.CarColor={}))}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(28)],r=function(t,e,n){"use strict";e.__esModule=!0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getAttentiveness=function(){return 1},e.prototype.getAggressiveness=function(){return.5},e.prototype.getRecklessness=function(){return.3},e.prototype.getName=function(){return"Defensive"},e}(n.default);e.default=i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(){}return t}();e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,
new i)}}();i=[n,e,n(28)],r=function(t,e,n){"use strict";e.__esModule=!0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getAttentiveness=function(){return 0},e.prototype.getAggressiveness=function(){return.5},e.prototype.getRecklessness=function(){return.5},e.prototype.getName=function(){return"Distracted"},e}(n.default);e.default=i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(28)],r=function(t,e,n){"use strict";e.__esModule=!0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getAttentiveness=function(){return.5},e.prototype.getAggressiveness=function(){return.5},e.prototype.getRecklessness=function(){return.5},e.prototype.getName=function(){return"Relaxed"},e}(n.default);e.default=i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(28)],r=function(t,e,n){"use strict";e.__esModule=!0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getAttentiveness=function(){return 1},e.prototype.getAggressiveness=function(){return 1},e.prototype.getRecklessness=function(){return.7},e.prototype.getName=function(){return"Spirited"},e}(n.default);e.default=i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(33),n(34),n(35),n(36),n(37)],r=function(t,e,n,i,r,s,a){"use strict";e.__esModule=!0;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.getClosestValidIntersection=function(t,e,i,o){for(var s=e.slice(),a=0,u=s;a<u.length;a++){var c=u[a];c.distance=c.getLocation().getDistance(t.getLocation())}s=s.sort(r.default.compareDistance);for(var l=0,h=s;l<h.length;l++){var c=h[l],f=new n.default(t,c);if((c.getLocation().getX()!=t.getLocation().getX()||c.getLocation().getY()!=t.getLocation().getY())&&!(c.getWays().length>=o.maxWaysPerIntersection||t.getWays().length>=o.maxWaysPerIntersection||t.isConnectedToIntersection(c)||f.getMinAngleBetweenWays(c.getWays())<o.wayMinAngle||f.getMinAngleBetweenWays(t.getWays())<o.wayMinAngle||f.isIntersectingWays(i)))return c}},e.isIsolated=function(t,e,n){for(var i=0,r=e;i<r.length;i++){var o=r[i];if(o.getLocation().getDistance(t)<n.intersectionMinDistance)return!1}return!0},e.generate=function(e){for(var r=[],o=[],a=1;a<=e.intersectionCount;){var u=t.randomPoint.call(this,e.height,e.width);if(this.isIsolated(u,r,e)){var c=new i.default(u);r.push(c),a+=1}}for(var l=0,h=r;l<h.length;l++)for(var c=h[l],f=c.getWays();f.length<e.minWaysPerIntersection;){var p=this.getClosestValidIntersection(c,r,o,e);if(!p)break;var g=new n.default(c,p);g.link(),o.push(g)}var y=new s.default(e.height,e.width,r,o);return t.generateBuildings.call(this,y,e),y},e}(a.default);e.default=u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e,n(5)],r=function(t,e,n){"use strict";e.__esModule=!0;var i=function(){function t(t,e){this.intersections=new Array,this.buildings=[],this.cars=[],this.setIntersection(0,t),this.setIntersection(1,e)}return t.prototype.setIntersection=function(t,e){0!=t&&1!=t||(this.intersections[t]=e)},t.prototype.getIntersection=function(t){return 0==t||1==t?this.intersections[t]:void 0},t.prototype.getDirectionToIntersection=function(t){return t||console.error("Way.getDirectionToIntersection() called with null Intersection!"),this.getIntersection(1)===t},t.prototype.sqr=function(t){return t*t},t.prototype.dist2=function(t,e){return this.sqr(t.getX()-e.getX())+this.sqr(t.getY()-e.getY())},t.prototype.getLength=function(){var t=this.getIntersection(0).getLocation(),e=this.getIntersection(1).getLocation();return t.getDistance(e)},t.prototype.getDistance=function(t){var e=this.getIntersection(0).getLocation(),i=this.getIntersection(1).getLocation(),r=this.dist2(e,i);if(0==r)return this.dist2(t,e);var o=((t.getX()-e.getX())*(i.getX()-e.getX())+(t.getY()-e.getY())*(i.getY()-e.getY()))/r;o=Math.max(0,Math.min(1,o));var s=new n.default(e.getX()+o*(i.getX()-e.getX()),e.getY()+o*(i.getY()-e.getY()));return Math.sqrt(this.dist2(t,s))},t.prototype.getAddress=function(t){var e=this.getIntersection(0).getLocation(),i=this.getIntersection(1).getLocation(),r=this.dist2(e,i);if(0==r)return 0;var o=((t.getX()-e.getX())*(i.getX()-e.getX())+(t.getY()-e.getY())*(i.getY()-e.getY()))/r;o=Math.max(0,Math.min(1,o));var s=new n.default(e.getX()+o*(i.getX()-e.getX()),e.getY()+o*(i.getY()-e.getY()));return e.getDistance(s)/e.getDistance(i)},t.prototype.getLocationOfAddress=function(t){var e=this.getIntersection(0).getLocation(),n=this.getIntersection(1).getLocation();return n.subtract(e).scalarMultiply(t).add(e)},t.prototype.getCommonIntersection=function(t){return this.getIntersection(0)==t.getIntersection(0)||this.getIntersection(0)==t.getIntersection(1)?this.getIntersection(0):this.getIntersection(1)==t.getIntersection(0)||this.getIntersection(1)==t.getIntersection(1)?this.getIntersection(1):void console.error("Way.getCommonIntersection() error: unconnected")},t.prototype.getOtherIntersection=function(t){return this.getIntersection(0)==t?this.getIntersection(1):this.getIntersection(1)==t?this.getIntersection(0):void console.error("Way.getOtherIntersection() error: unconnected")},t.prototype.getHeading=function(){var t=this.getIntersection(1).getLocation().subtract(this.getIntersection(0).getLocation());return Math.atan2(t.getX(),t.getY())*(180/Math.PI)},t.prototype.getAngleBetweenWay=function(t){var e=this.getCommonIntersection(t),n=this.getOtherIntersection(e).getLocation(),i=t.getOtherIntersection(e).getLocation(),r=e.getLocation(),o=r.subtract(n),s=r.subtract(i);return Math.acos(o.dotProduct(s)/o.magnitude()/s.magnitude())*(180/Math.PI)},t.prototype.getMinAngleBetweenWays=function(t){for(var e=180,n=0,i=t;n<i.length;n++){var r=i[n],o=this.getAngleBetweenWay(r);e>o&&(e=o)}return e},t.prototype.isIntersectingWay=function(t){var e=this.getIntersection(0).getLocation(),i=this.getIntersection(1).getLocation(),r=t.getIntersection(0).getLocation(),o=t.getIntersection(1).getLocation(),s=new n.default(i.getX()-e.getX(),i.getY()-e.getY()),a=new n.default(o.getX()-r.getX(),o.getY()-r.getY()),u=(-s.getY()*(e.getX()-r.getX())+s.getX()*(e.getY()-r.getY()))/(-a.getX()*s.getY()+s.getX()*a.getY()),c=(a.getX()*(e.getY()-r.getY())-a.getY()*(e.getX()-r.getX()))/(-a.getX()*s.getY()+s.getX()*a.getY());return u>=0&&u<=1&&c>=0&&c<=1},t.prototype.isIntersectingWays=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];if(this.isIntersectingWay(i)&&!this.isConnectedToWay(i))return!0}return!1},t.prototype.getBuildings=function(){return this.buildings},t.prototype.addBuilding=function(t){t&&this.buildings.indexOf(t)==-1&&this.buildings.push(t)},t.prototype.getCars=function(){return this.cars},t.prototype.addCar=function(t){t&&this.cars.indexOf(t)==-1&&this.cars.push(t)},t.prototype.removeCar=function(t){if(t){var e=this.cars.indexOf(t);e>-1&&this.cars.splice(e,1)}},t.prototype.isConnectedToIntersection=function(t){return this.getIntersection(0)&&t==this.getIntersection(0)||this.getIntersection(1)&&t==this.getIntersection(1)},t.prototype.isConnectedToWay=function(t){return this.getIntersection(0)==t.getIntersection(0)||this.getIntersection(0)==t.getIntersection(1)||this.getIntersection(1)==t.getIntersection(0)||this.getIntersection(1)==t.getIntersection(1)},t.prototype.link=function(){for(var t=0,e=this.buildings;t<e.length;t++){var n=e[t];n.setWay(this)}this.getIntersection(0).addWay(this),this.getIntersection(1).addWay(this)},t}();e.default=i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(t){this.location=t,this.ways=[],this.counter=1,this.carQueue=[]}return t.prototype.getLocation=function(){return this.location},t.prototype.addWay=function(t){t&&this.ways.indexOf(t)==-1&&this.ways.push(t)},t.prototype.getWays=function(){return this.ways},t.prototype.isConnectedToIntersection=function(t){for(var e=0,n=this.ways;e<n.length;e++){var i=n[e];if(i.isConnectedToIntersection(t))return!0}return!1},t.prototype.getWayBetween=function(t){for(var e=0,n=this.ways;e<n.length;e++){var i=n[e];if(i.isConnectedToIntersection(this)&&i.isConnectedToIntersection(t))return i}return null},t.prototype.addCarToQueue=function(t){t&&this.carQueue.push(t)},t.prototype.tick=function(){if(this.carQueue.length>0){if(0==this.counter){var e=this.carQueue.shift();e.advanceThroughIntersection()}this.counter=(this.counter+1)%t.TICK_COUNTER}},t}();n.TICK_COUNTER=15,e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(34)],r=function(t,e,n){"use strict";e.__esModule=!0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.compareDistance=function(t,e){return t.distance>e.distance?1:t.distance<e.distance?-1:0},e}(n.default);e.default=i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(t,e,n,i){this.height=t,this.width=e,this.intersections=n,this.ways=i,this.buildings=[]}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.getIntersections=function(){return this.intersections},t.prototype.getWays=function(){return this.ways},t.prototype.getBuildings=function(){return this.buildings},t.prototype.addBuilding=function(t){this.buildings.push(t)},t}();e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e,n(38),n(24),n(5)],r=function(t,e,n,i,r){"use strict";e.__esModule=!0;var o=function(){function t(){}return t.randomPoint=function(t,e){var n=Math.random()*e,i=Math.random()*t;return new r.default(n,i)},t.testLocation=function(t,e,i){if(e.getX()<i.mapEdgeDistance||e.getX()>i.width-i.mapEdgeDistance||e.getY()<i.mapEdgeDistance||e.getY()>i.height-i.mapEdgeDistance)return!1;for(var r=0,o=t.getIntersections();r<o.length;r++){var s=o[r],a=e.getDistance(s.getLocation());if(a<i.intersectionDistance)return!1}for(var u=0,c=t.getBuildings();u<c.length;u++){var l=c[u],a=e.getDistance(l.getLocation());if(a<i.buildingDistance)return!1}for(var h=null,f=0,p=t.getWays();f<p.length;f++){var g=p[f],a=g.getDistance(e);if(a<i.wayMinDistance)return!1;(!h||h.getDistance(e)>a)&&(h=g)}if(h.getDistance(e)>i.wayMaxDistance)return!1;var y=h.getAddress(e),d=new n.default(e,h,y);return d.link(),t.addBuilding(d),!0},t.generateBuildings=function(t,e){for(var n=1;n<=e.buildingCount;n++)for(var r=!1;!r;){var o=this.randomPoint(t.getHeight(),t.getWidth());this.testLocation(t,o,e)&&(r=!0)}for(var s=Math.floor(t.getBuildings().length*e.percentResidential/100),a=0,u=t.getBuildings();a<u.length;a++){var c=u[a];s>0?(c.setType(i.BuildingType.Residential),c.setCapacity(Math.floor(Math.random()*(e.maxCapacityResidential-e.minCapacityResidential+1))+e.minCapacityResidential),s-=1):(c.setType(i.BuildingType.Industrial),c.setCapacity(Math.floor(Math.random()*(e.maxCapacityIndustrial-e.minCapacityIndustrial+1))+e.minCapacityIndustrial))}},t}();e.default=o}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(t,e,n){this.location=t,this.distance=n,this.persons=[],this.setWay(e)}return t.prototype.getLocation=function(){return this.location},t.prototype.setWay=function(t){this.way=t},t.prototype.getWay=function(){return this.way},t.prototype.getDistance=function(){return this.distance},t.prototype.getType=function(){return this.type},t.prototype.setType=function(t){this.type=t},t.prototype.link=function(){this.way&&this.way.addBuilding(this)},t.prototype.getPersons=function(){return this.persons},t.prototype.addPerson=function(t){t&&this.persons.indexOf(t)==-1&&this.persons.push(t)},t.prototype.getCapacity=function(){return this.capacity},t.prototype.setCapacity=function(t){this.capacity=t},t}();e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(){this.height=855,this.width=1520,this.operationMaxAttempts=100,this.mapEdgeDistance=25,this.intersectionDistance=25,this.buildingDistance=25,this.wayMaxDistance=20,this.wayMinDistance=12,this.buildingCount=750,this.percentResidential=67,this.minCapacityResidential=1,this.maxCapacityResidential=2,this.minCapacityIndustrial=2,this.maxCapacityIndustrial=4,this.intersectionCount=250,this.minWaysPerIntersection=4,this.maxWaysPerIntersection=4,this.intersectionMinDistance=50,this.wayMinAngle=30,this.metersPerBlock=95}return t}();e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e,n(41),n(42),n(43),n(50)],r=function(t,e,n,i,r,o){"use strict";e.__esModule=!0;var s=function(){function t(t,e){this.canvas=t,this.gl=this.initWebGL(t),this.gl&&(this.initShaders(),this.uPMatrix=this.buildPMatrix(),this.staticBuffer=new r.default,this.staticBuffer.build(e))}return t.prototype.initWebGL=function(t){var e=void 0;return e=t.getContext("webgl")||t.getContext("experimental-webgl"),e||console.error("Unable to initialize WebGL. You will not see anything."),e},t.prototype.buildShader=function(t,e){var n=this.gl.createShader(t);if(this.gl.shaderSource(n,e),this.gl.compileShader(n),!this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)){var i=this.gl.getShaderInfoLog(n);throw this.gl.deleteShader(n),"Could not compile WebGL program.\n"+i}return n},t.prototype.initShaders=function(){var e=this.buildShader(this.gl.FRAGMENT_SHADER,t.FRAGMENT_SHADER_SOURCE),n=this.buildShader(this.gl.VERTEX_SHADER,t.VERTEX_SHADER_SOURCE);this.shaderProgram=this.gl.createProgram(),this.gl.attachShader(this.shaderProgram,e),this.gl.attachShader(this.shaderProgram,n),this.gl.linkProgram(this.shaderProgram),this.gl.getProgramParameter(this.shaderProgram,this.gl.LINK_STATUS)||console.error("Unable to use shader program: "+this.gl.getProgramInfoLog(this.shaderProgram)),this.gl.useProgram(this.shaderProgram),this.aVertexPosition=this.gl.getAttribLocation(this.shaderProgram,"aVertexPosition"),this.gl.enableVertexAttribArray(this.aVertexPosition),this.aVertexColor=this.gl.getAttribLocation(this.shaderProgram,"aVertexColor"),this.gl.enableVertexAttribArray(this.aVertexColor)},t.prototype.buildMVMatrix=function(t){var e=n.default.translation(new i.default(-t.getLocation().getX(),-t.getLocation().getY(),0,1)),r=n.default.rotation("x",90),o=n.default.rotation("y",t.getAzimuth()),s=n.default.rotation("x",-t.getElevation()),a=n.default.translation(new i.default(0,0,-t.getRange(),1));return e.multiplyByMatrix(r).multiplyByMatrix(o).multiplyByMatrix(s).multiplyByMatrix(a)},t.prototype.buildPMatrix=function(){return n.default.perspective(60,this.canvas.width/this.canvas.height,10,1500)},t.prototype.setUniforms=function(){var t=this.gl.getUniformLocation(this.shaderProgram,"uMVMatrix");this.gl.uniformMatrix4fv(t,!1,new Float32Array(this.uMVMatrix.flatten()));var e=this.gl.getUniformLocation(this.shaderProgram,"uPMatrix");this.gl.uniformMatrix4fv(e,!1,new Float32Array(this.uPMatrix.flatten()))},t.prototype.draw=function(t){var e=new o.default;e.build(t);var n=t.getCamera();this.uMVMatrix=this.buildMVMatrix(n),this.setUniforms(),this.gl.clearColor(.4,.8,1,1),this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(this.gl.LEQUAL),this.gl.enable(this.gl.CULL_FACE),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.staticBuffer.bind(this.gl,this.aVertexPosition,this.aVertexColor),this.staticBuffer.render(this.gl),e.bind(this.gl,this.aVertexPosition,this.aVertexColor),e.render(this.gl),console.log("Car/Person ratio: "+t.getCars().length/t.getPersons().length+"; Time: "+t.getClock().toString())},t}();s.FRAGMENT_SHADER_SOURCE="varying lowp vec4 vColor; \t  void main(void) { \t    gl_FragColor = vColor; \t  }",s.VERTEX_SHADER_SOURCE="attribute vec4 aVertexPosition; \t   attribute vec4 aVertexColor; \t   uniform mat4 uMVMatrix; \t   uniform mat4 uPMatrix; \t   varying lowp vec4 vColor; \t   void main(void) { \t     gl_Position = uPMatrix * uMVMatrix * aVertexPosition; \t     vColor = aVertexColor; \t   }",e.default=s}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(t){void 0===t&&(t=4),this.size=4,this.elements=[],this.size=t;for(var e=1;e<=this.size;e++){for(var n=[],i=1;i<=this.size;i++)n.push(0);this.elements.push(n)}}return t.serialize=function(e){for(var n=new t,i=0;i<4;i++)for(var r=0;r<4;r++)n.setElement(i,r,e[4*r+i]);return n},t.perspective=function(e,n,i,r){var o=i*Math.tan(e*Math.PI/360),s=-o,a=s*n,u=o*n;return t.frustum(a,u,s,o,i,r)},t.frustum=function(e,n,i,r,o,s){var a=2*o/(n-e),u=2*o/(r-i),c=(n+e)/(n-e),l=(r+i)/(r-i),h=-(s+o)/(s-o),f=-2*s*o/(s-o),p=new t;return p.setElement(0,0,a),p.setElement(1,1,u),p.setElement(2,2,h),p.setElement(2,3,-1),p.setElement(3,2,f),p.setElement(2,0,c),p.setElement(2,1,l),p},t.rotation=function(e,n){var i=t.identity();return"x"==e?(i.setElement(1,1,Math.cos(n*Math.PI/180)),i.setElement(2,2,Math.cos(n*Math.PI/180)),i.setElement(1,2,-Math.sin(n*Math.PI/180)),i.setElement(2,1,Math.sin(n*Math.PI/180))):"y"==e?(i.setElement(0,0,Math.cos(n*Math.PI/180)),i.setElement(2,2,Math.cos(n*Math.PI/180)),i.setElement(0,2,-Math.sin(n*Math.PI/180)),i.setElement(2,0,Math.sin(n*Math.PI/180))):(i.setElement(0,0,Math.cos(n*Math.PI/180)),i.setElement(1,1,Math.cos(n*Math.PI/180)),i.setElement(0,1,Math.sin(n*Math.PI/180)),i.setElement(1,0,-Math.sin(n*Math.PI/180))),i},t.translation=function(e){var n=t.identity();return n.setElement(3,0,e.getElement(0)),n.setElement(3,1,e.getElement(1)),n.setElement(3,2,e.getElement(2)),n},t.scale=function(e){var n=t.identity();return n.setElement(0,0,e),n.setElement(1,1,e),n.setElement(2,2,e),n},t.identity=function(e){void 0===e&&(e=4);for(var n=new t(e),i=0;i<e;i++)n.setElement(i,i,1);return n},t.prototype.transpose=function(){for(var e=new t,n=0;n<this.size;n++)for(var i=0;i<this.size;i++)e.setElement(n,i,this.getElement(i,n));return e},t.prototype.inverse=function(){var e,n=this.flatten(),i=[];if(i[0]=n[5]*n[10]*n[15]-n[5]*n[11]*n[14]-n[9]*n[6]*n[15]+n[9]*n[7]*n[14]+n[13]*n[6]*n[11]-n[13]*n[7]*n[10],i[4]=-n[4]*n[10]*n[15]+n[4]*n[11]*n[14]+n[8]*n[6]*n[15]-n[8]*n[7]*n[14]-n[12]*n[6]*n[11]+n[12]*n[7]*n[10],i[8]=n[4]*n[9]*n[15]-n[4]*n[11]*n[13]-n[8]*n[5]*n[15]+n[8]*n[7]*n[13]+n[12]*n[5]*n[11]-n[12]*n[7]*n[9],i[12]=-n[4]*n[9]*n[14]+n[4]*n[10]*n[13]+n[8]*n[5]*n[14]-n[8]*n[6]*n[13]-n[12]*n[5]*n[10]+n[12]*n[6]*n[9],i[1]=-n[1]*n[10]*n[15]+n[1]*n[11]*n[14]+n[9]*n[2]*n[15]-n[9]*n[3]*n[14]-n[13]*n[2]*n[11]+n[13]*n[3]*n[10],i[5]=n[0]*n[10]*n[15]-n[0]*n[11]*n[14]-n[8]*n[2]*n[15]+n[8]*n[3]*n[14]+n[12]*n[2]*n[11]-n[12]*n[3]*n[10],i[9]=-n[0]*n[9]*n[15]+n[0]*n[11]*n[13]+n[8]*n[1]*n[15]-n[8]*n[3]*n[13]-n[12]*n[1]*n[11]+n[12]*n[3]*n[9],i[13]=n[0]*n[9]*n[14]-n[0]*n[10]*n[13]-n[8]*n[1]*n[14]+n[8]*n[2]*n[13]+n[12]*n[1]*n[10]-n[12]*n[2]*n[9],i[2]=n[1]*n[6]*n[15]-n[1]*n[7]*n[14]-n[5]*n[2]*n[15]+n[5]*n[3]*n[14]+n[13]*n[2]*n[7]-n[13]*n[3]*n[6],i[6]=-n[0]*n[6]*n[15]+n[0]*n[7]*n[14]+n[4]*n[2]*n[15]-n[4]*n[3]*n[14]-n[12]*n[2]*n[7]+n[12]*n[3]*n[6],i[10]=n[0]*n[5]*n[15]-n[0]*n[7]*n[13]-n[4]*n[1]*n[15]+n[4]*n[3]*n[13]+n[12]*n[1]*n[7]-n[12]*n[3]*n[5],i[14]=-n[0]*n[5]*n[14]+n[0]*n[6]*n[13]+n[4]*n[1]*n[14]-n[4]*n[2]*n[13]-n[12]*n[1]*n[6]+n[12]*n[2]*n[5],i[3]=-n[1]*n[6]*n[11]+n[1]*n[7]*n[10]+n[5]*n[2]*n[11]-n[5]*n[3]*n[10]-n[9]*n[2]*n[7]+n[9]*n[3]*n[6],i[7]=n[0]*n[6]*n[11]-n[0]*n[7]*n[10]-n[4]*n[2]*n[11]+n[4]*n[3]*n[10]+n[8]*n[2]*n[7]-n[8]*n[3]*n[6],i[11]=-n[0]*n[5]*n[11]+n[0]*n[7]*n[9]+n[4]*n[1]*n[11]-n[4]*n[3]*n[9]-n[8]*n[1]*n[7]+n[8]*n[3]*n[5],i[15]=n[0]*n[5]*n[10]-n[0]*n[6]*n[9]-n[4]*n[1]*n[10]+n[4]*n[2]*n[9]+n[8]*n[1]*n[6]-n[8]*n[2]*n[5],e=n[0]*i[0]+n[1]*i[4]+n[2]*i[8]+n[3]*i[12],0==e)return null;e=1/e;var r=t.serialize(i);return r.multiplyByScalar(e)},t.prototype.multiplyByMatrix=function(e){for(var n=new t,i=0;i<this.size;i++)for(var r=0;r<this.size;r++){for(var o=0,s=0;s<this.size;s++)o+=this.getElement(i,s)*e.getElement(s,r);n.setElement(i,r,o)}return n},t.prototype.multiplyByScalar=function(e){for(var n=new t(this.size),i=0;i<this.size;i++)for(var r=0;r<this.size;r++)n.setElement(i,r,this.getElement(i,r)*e);return n},t.prototype.add=function(e){for(var n=new t(this.size),i=1;i<=this.size;i++)for(var r=1;r<=this.size;r++)n.setElement(i,r,this.getElement(i,r)+e.getElement(i,r));return n},t.prototype.subtract=function(e){for(var n=new t(this.size),i=1;i<=this.size;i++)for(var r=1;r<=this.size;r++)n.setElement(i,r,this.getElement(i,r)-e.getElement(i,r));return n},t.prototype.getElement=function(t,e){return t>this.size-1||t<0?null:e>this.size-1||e<0?null:this.elements[t][e]},t.prototype.setElement=function(t,e,n){t>this.size-1||t<0||e>this.size-1||e<0||(this.elements[t][e]=n)},t.prototype.flatten=function(){for(var t=[],e=0;e<this.size;e++)for(var n=0;n<this.size;n++)t.push(this.getElement(e,n));return t},t.prototype.format=function(){for(var t="[ ",e=0;e<this.size;e++){for(var n=0;n<this.size;n++)t+=this.getElement(e,n),n<this.size-1&&(t+=", ");t+="; "}return t+="]"},t}();e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(t,e,n,i){this.size=4,this.elements=[t,e,n,i]}return t.prototype.setElement=function(t,e){t<0||t>this.size-1||(this.elements[t]=e)},t.prototype.getElement=function(t){return t<0||t>this.size-1?null:this.elements[t]},t.prototype.multiplyByScalar=function(e){for(var n=new t(0,0,0,1),i=0;i<this.size-1;i++)n.setElement(i,this.getElement(i)*e);return n},t.prototype.multiplyByMatrix=function(e){for(var n=new t(0,0,0,0),i=0;i<this.size;i++){for(var r=0,o=0;o<this.size;o++)r+=this.getElement(o)*e.getElement(o,i);n.setElement(i,r)}return n},t.prototype.crossProduct=function(e){var n=new t(0,0,0,1);return n.setElement(0,this.getElement(1)*e.getElement(2)-this.getElement(2)*e.getElement(1)),n.setElement(1,this.getElement(2)*e.getElement(0)-this.getElement(0)*e.getElement(2)),n.setElement(2,this.getElement(0)*e.getElement(1)-this.getElement(1)*e.getElement(0)),n},t.prototype.dotProduct=function(t){return this.getElement(0)*t.getElement(0)+this.getElement(1)*t.getElement(1)+this.getElement(2)*t.getElement(2)},t.prototype.toUnit=function(){var e=this.magnitude(),n=new t(this.getElement(0)/e,this.getElement(1)/e,this.getElement(2)/e,this.getElement(3));return n},t.prototype.subtract=function(e){return new t(this.getElement(0)-e.getElement(0),this.getElement(1)-e.getElement(1),this.getElement(2)-e.getElement(2),1)},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.getElement(0),2)+Math.pow(this.getElement(1),2)+Math.pow(this.getElement(2),2))},t.prototype.scaleToOne=function(){var e=this.getElement(3);return new t(this.getElement(0)/e,this.getElement(1)/e,this.getElement(2)/e,this.getElement(3)/e)},t.prototype.format=function(){var t=this.scaleToOne();return"[ "+t.getElement(0)+", "+t.getElement(1)+", "+t.getElement(2)+", "+t.getElement(3)+" ]"},t.prototype.flatten=function(){return[this.getElement(0),this.getElement(1),this.getElement(2),this.getElement(3)]},t}();e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(44),n(45),n(47),n(48),n(42),n(49),n(41)],r=function(t,e,n,i,r,s,a,u,c){"use strict";e.__esModule=!0;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.build=function(t){var e=t.getMap(),n=new i.default(this.vertices.length);this.pushMesh(n);var o=new r.default(this.vertices.length,e);this.pushMesh(o);for(var l=0,h=e.getBuildings();l<h.length;l++){var f=h[l],p=new s.default(this.vertices.length,f.getType());p.multiplyByMatrix(c.default.scale(20)),p.multiplyByMatrix(c.default.rotation("z",-f.getWay().getHeading()));var g=f.getLocation();p.multiplyByMatrix(c.default.translation(new a.default(g.getX(),g.getY(),0,1))),this.pushMesh(p)}for(var y=0,d=e.getWays();y<d.length;y++){var v=d[y],m=new u.default(this.vertices.length,v);this.pushMesh(m)}},e}(n.default);e.default=l}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(){this.vertices=[],this.colors=[],this.meshes=[]}return t.prototype.bind=function(t,e,n){var i=t.createBuffer(),r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.vertices),t.STATIC_DRAW),t.vertexAttribPointer(e,4,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.colors),t.STATIC_DRAW),t.vertexAttribPointer(n,4,t.FLOAT,!1,0,0)},t.prototype.render=function(t){for(var e=0,n=this.meshes;e<n.length;e++){var i=n[e];i.render(t)}},t.prototype.pushMesh=function(t){this.vertices=this.vertices.concat(t.getVertices()),this.colors=this.colors.concat(t.getColors()),this.meshes.push(t)},t.prototype.getVertices=function(){return this.vertices},t.prototype.getColors=function(){return this.colors},t.prototype.getMeshes=function(){return this.meshes},t}();e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(46)],r=function(t,e,n){"use strict";e.__esModule=!0;var i=function(t){function e(e){var n=t.call(this,e)||this;return n.vertices=[1,.01,0,1,0,.01,0,1,1,-.01,0,1,0,-.01,0,1,.01,1,0,1,-.01,1,0,1,.01,0,0,1,-.01,0,0,1,.01,0,1,1,.01,0,0,1,-.01,0,1,1,-.01,0,0,1,.01,0,1,1,-.01,0,1,1,.01,0,0,1,-.01,0,0,1],n.colors=[1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1],n}return o(e,t),e.prototype.render=function(t){t.drawArrays(t.TRIANGLE_STRIP,this.offset+0,4),t.drawArrays(t.TRIANGLE_STRIP,this.offset+4,4),t.drawArrays(t.TRIANGLE_STRIP,this.offset+8,4),t.drawArrays(t.TRIANGLE_STRIP,this.offset+12,4)},e}(n.default);e.default=i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e,n(42)],r=function(t,e,n){"use strict";e.__esModule=!0;var i=function(){function t(t){this.vectorSize=4,this.offset=Math.floor(t/this.vectorSize)}return t.prototype.multiplyByMatrix=function(t){for(var e=[],i=0;i<Math.floor(this.vertices.length/this.vectorSize);i++){var r=i*this.vectorSize,o=new n.default(this.vertices[r+0],this.vertices[r+1],this.vertices[r+2],this.vertices[r+3]),s=o.multiplyByMatrix(t);e=e.concat(s.flatten())}return this.vertices=e,this},t.prototype.getVertices=function(){return this.vertices},t.prototype.getColors=function(){return this.colors},t}();e.default=i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(46)],r=function(t,e,n){"use strict";e.__esModule=!0;var i=function(t){function e(e,n){var i=t.call(this,e)||this;return i.vertices=[n.getWidth(),n.getHeight(),0,1,0,n.getHeight(),0,1,n.getWidth(),0,0,1,0,0,0,1],i.colors=[0,.8,0,1,0,.8,0,1,0,.8,0,1,0,.8,0,1],i}return o(e,t),e.prototype.render=function(t){t.drawArrays(t.TRIANGLE_STRIP,this.offset+0,4)},e}(n.default);e.default=i}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(24),n(46)],r=function(t,e,n,i){"use strict";e.__esModule=!0;var r=function(t){function e(e,i){var r=t.call(this,e)||this;return r.vertices=[.5,.5,1,1,-.5,.5,1,1,.5,-.5,1,1,-.5,-.5,1,1,.5,.5,0,1,.5,.5,1,1,.5,-.5,0,1,.5,-.5,1,1,-.5,.5,0,1,-.5,-.5,0,1,-.5,.5,1,1,-.5,-.5,1,1,.5,.5,0,1,-.5,.5,0,1,.5,.5,1,1,-.5,.5,1,1,-.5,-.5,0,1,.5,-.5,0,1,-.5,-.5,1,1,.5,-.5,1,1],i==n.BuildingType.Residential?r.colors=[.5,.2,.2,1,.5,.2,.2,1,.5,.2,.2,1,.5,.2,.2,1,.5,0,0,1,.5,0,0,1,.5,0,0,1,.5,0,0,1,.5,0,0,1,.5,0,0,1,.5,0,0,1,.5,0,0,1,.5,0,0,1,.5,0,0,1,.5,0,0,1,.5,0,0,1,.5,0,0,1,.5,0,0,1,.5,0,0,1,.5,0,0,1]:r.colors=[.2,.2,.5,1,.2,.2,.5,1,.2,.2,.5,1,.2,.2,.5,1,0,0,.5,1,0,0,.5,1,0,0,.5,1,0,0,.5,1,0,0,.5,1,0,0,.5,1,0,0,.5,1,0,0,.5,1,0,0,.5,1,0,0,.5,1,0,0,.5,1,0,0,.5,1,0,0,.5,1,0,0,.5,1,0,0,.5,1,0,0,.5,1],r}return o(e,t),e.prototype.render=function(t){t.drawArrays(t.TRIANGLE_STRIP,this.offset+0,4),t.drawArrays(t.TRIANGLE_STRIP,this.offset+4,4),t.drawArrays(t.TRIANGLE_STRIP,this.offset+8,4),t.drawArrays(t.TRIANGLE_STRIP,this.offset+12,4),t.drawArrays(t.TRIANGLE_STRIP,this.offset+16,4)},e}(i.default);e.default=r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(46),n(5)],r=function(t,e,n,i){"use strict";e.__esModule=!0;var r=function(t){function e(e,n){var r=t.call(this,e)||this,o=n.getIntersection(0).getLocation(),s=n.getIntersection(1).getLocation(),a=2,u=n.getHeading()*Math.PI/180,c=new i.default(o.getX()+a*Math.cos(u),o.getY()-a*Math.sin(u)),l=new i.default(o.getX()-a*Math.cos(u),o.getY()+a*Math.sin(u)),h=new i.default(s.getX()-a*Math.cos(u),s.getY()+a*Math.sin(u)),f=new i.default(s.getX()+a*Math.cos(u),s.getY()-a*Math.sin(u));return r.vertices=[h.getX(),h.getY(),.01,1,l.getX(),l.getY(),.01,1,f.getX(),f.getY(),.01,1,c.getX(),c.getY(),.01,1],r.colors=[.313,.349,.407,1,.313,.349,.407,1,.313,.349,.407,1,.313,.349,.407,1],r}return o(e,t),e.prototype.render=function(t){t.drawArrays(t.TRIANGLE_STRIP,this.offset+0,4)},e}(n.default);e.default=r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){
var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(51),n(44),n(41),n(5),n(42)],r=function(t,e,n,i,r,s,a){"use strict";e.__esModule=!0;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.build=function(t){for(var e=0,i=t.getCars();e<i.length;e++){var o=i[e],u=new n.default(this.vertices.length,o.getPerson().getCarColor());u.multiplyByMatrix(r.default.scale(1.5)),u.multiplyByMatrix(r.default.rotation("z",-o.getWay().getHeading()));var c=o.getWay().getLocationOfAddress(o.getWayPosition()),l=o.getWayDirectionPositive()?90:-90,h=new s.default(Math.sin((o.getWay().getHeading()+l)*(Math.PI/180)),Math.cos((o.getWay().getHeading()+l)*(Math.PI/180)));c=c.add(h),u.multiplyByMatrix(r.default.translation(new a.default(c.getX(),c.getY(),0,1))),this.pushMesh(u)}},e}(i.default);e.default=u}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();i=[n,e,n(46),n(26)],r=function(t,e,n,i){"use strict";e.__esModule=!0;var r=function(t){function e(e,n){var r=t.call(this,e)||this;switch(r.vertices=[.5,1.15,1,1,-.5,1.15,1,1,.5,-1.15,1,1,-.5,-1.15,1,1,.5,1.15,0,1,.5,1.15,1,1,.5,-1.15,0,1,.5,-1.15,1,1,-.5,1.15,0,1,-.5,-1.15,0,1,-.5,1.15,1,1,-.5,-1.15,1,1,.5,1.15,0,1,-.5,1.15,0,1,.5,1.15,1,1,-.5,1.15,1,1,-.5,-1.15,0,1,.5,-1.15,0,1,-.5,-1.15,1,1,.5,-1.15,1,1],n){case i.CarColor.Purple:r.colors=[.5,.2,.5,1,.5,.2,.5,1,.5,.2,.5,1,.5,.2,.5,1,.5,0,.5,1,.5,0,.5,1,.5,0,.5,1,.5,0,.5,1,.5,0,.5,1,.5,0,.5,1,.5,0,.5,1,.5,0,.5,1,.5,0,.5,1,.5,0,.5,1,.5,0,.5,1,.5,0,.5,1,.5,0,.5,1,.5,0,.5,1,.5,0,.5,1,.5,0,.5,1];break;case i.CarColor.Yellow:r.colors=[1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1];break;case i.CarColor.White:r.colors=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];break;case i.CarColor.Black:r.colors=[0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1];break;case i.CarColor.Orange:r.colors=[1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1,1,.549,0,1];break;case i.CarColor.Brown:r.colors=[.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1,.741,.718,.42,1];break;case i.CarColor.Green:r.colors=[.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1,.678,1,.184,1];break;case i.CarColor.Blue:r.colors=[.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1,.529,.808,.98,1];break;default:r.colors=[.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1,.98,.502,.447,1]}return r}return o(e,t),e.prototype.render=function(t){t.drawArrays(t.TRIANGLE_STRIP,this.offset+0,4),t.drawArrays(t.TRIANGLE_STRIP,this.offset+4,4),t.drawArrays(t.TRIANGLE_STRIP,this.offset+8,4),t.drawArrays(t.TRIANGLE_STRIP,this.offset+12,4),t.drawArrays(t.TRIANGLE_STRIP,this.offset+16,4)},e}(n.default);e.default=r}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e],r=function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(){this.time=t.DefaultStartTime}return t.prototype.tick=function(){this.time=(this.time+1)%t.MinutesPerDay},t.prototype.getTime=function(){return this.time},t.prototype.toString=function(){var t=String(Math.floor(this.time/60)),e=String(this.time%60);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),t+":"+e},t}();n.MinutesPerDay=1440,n.DefaultStartTime=410,e.default=n}.apply(e,i),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i,r;i=[n,e,n(17)],r=function(t,e,n){"use strict";e.__esModule=!0;var i=function(){function t(t){this.world=t}return t.prototype.tick=function(){for(var t=this.world.getCars(),e=t.length-1;e>=0;e--)t[e].getState()!=n.CarState.Arrived?t[e].move():t.splice(e,1);for(var i=this.world.getMap().getIntersections(),r=0,o=i;r<o.length;r++){var s=o[r];s.tick()}},t}();e.default=i}.apply(e,i),!(void 0!==r&&(t.exports=r))}]);